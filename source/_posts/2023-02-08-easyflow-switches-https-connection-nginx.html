---
layout: post
title: EasyFlow改用https連線(以Nginx作為反向proxy)
tag:
- easyflow gp
- nginx
- ssl
---

<p>[使用者]→https→[Nginx]→[EasyFlow]</p><p><br /></p><p>1.EasyFlow位址 http://&lt;EasyFlow FQDN&gt;:&lt;EasyFlow port&gt;/</p><p>2.安裝SS憑證後EasyFlow位址 https://&lt;EasyFlow FQDN&gt;/</p><p>3.Nginx設定檔</p><p><br /></p>
<div><pre><code class="json">
http {
    # 設定請求內容大小無限制
    client_max_body_size 0;
}


server {
    listen       443 default_server ssl;
    server_name  &lt;EasyFlow FQDN&gt;;

    ssl_certificate      SSL憑證路徑;
    ssl_certificate_key  PrivateKey路徑;
    ssl_prefer_server_ciphers  on;

    # https://&lt;EasyFlow FQDN&gt;/ -&gt; https://&lt;EasyFlow FQDN&gt;/NaNaWeb/*
    location = / {
        rewrite ^/(.*)$ /NaNaWeb/$1 last;
    }

    # favicon.ico圖示
    location ~* ^/favicon.ico$ {
        proxy_pass http://&lt;EasyFlow FQDN&gt;:&lt;EasyFlow port&gt;;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location ~* ^/NaNaWeb/.*$ {
        proxy_pass http://&lt;EasyFlow FQDN&gt;:&lt;EasyFlow port&gt;;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        sub_filter_once off;
        sub_filter http://&lt;EasyFlow FQDN&gt; https://&lt;EasyFlow FQDN&gt;;
    }
}</code></pre><pre><code class="json"><pre style="background-color: white; color: #333333; font-size: 13.5px;"><span style="font-size: medium;"><br /></span></pre><pre style="background-color: white; color: #333333; font-size: 13.5px;"><span style="font-size: medium;">再<span style="color: #3d85c6;">reload </span>Nginx即可</span></pre></code></pre></div>

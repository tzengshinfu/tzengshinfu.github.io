---
layout: post
title: 修正進行中的表單欄位權限
tag:
- easyflow gp
---

場景:<br /> <br />流程的某一關(本例為ACT2)的控件(本例為附件按鈕Attachment)忘了設成Enable,導致在這關都無法上傳附件。 <br /> <a href="https://www.blogger.com/#"><img border="0" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgOX2rGEmEuVwKBCviNYNm_IpDNxSyhc1jT7dV7dW8Hhc6fk7CllExp4NskIHNPeF8K2rXblCQyAdjuFIwWygBvKJKrFhqGWlUUmCkDSawWcrYUZyfJ_Kr8hQvrmrCUiDUmwAv10ThfmWa7/s400/Image_20190107083620.png" /></a> <br /> <br /> <br /> 動作: <br /> (1)找出目前在使用的流程定義。<br />SQL語法:<br /><pre><code class="sql">SELECT * <br />FROM ProcessDefinition <br />INNER JOIN ProcessDefinitionHeader <br />ON ProcessDefinition.headerOID = ProcessDefinitionHeader.OID <br />AND ProcessDefinitionHeader.validTo &gt;= GETDATE() <br />INNER JOIN RedefinableHeader <br />ON ProcessDefinition.redefinableHeaderOID = RedefinableHeader.OID <br />AND RedefinableHeader.publicationStatus = 'RELEASED' <br />WHERE id = 'test00011';</code></pre> <br /> <a href="https://www.blogger.com/#"><img border="0" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEifAMVDcvx5Xk_vOQp_wEneN59YG3bYD7VjZ81uT_pzOghH2YbPkNuQZ7YKDGGL1mHMS5GdOWT49ZLrSdfQrxOO5PvirbDpJAN2j7t-EIw8pjk4W8QfFWX3W17wZmdo2IZjkHFYvBdiKmWf/s400/Image_20190107091413.png" /></a> <br /> <br /><br />(2)以(1)的OID查詢這個流程定義底下所用的所有活動關卡定義。 <br /> SQL語法:<div><pre><code class="sql">SELECT id, formFieldAccessDefinitionOID <br /> FROM ActivityDefinition <br /> WHERE containerOID = '4beabe6fe40510048797ab8fbcef89eb';</code></pre> <br /> <a href="https://www.blogger.com/#"><img border="0" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjjLXiBMts5dxEJD30ctYq79TTSFKqA38Bx0wLaYOYSEieazGRIRWbUX3eSCx1nMNTp3giFsJqdr3dMZBwKneM-Zu_jBdprPMbipxH193OTE1EHgon5mV_7VKoyo1WP8kF1wPxNgksblkE-/s400/Image_20190107091636.png" /></a> <br /><br /> <br /> (3)以(2)的formFieldAccessDefinitionOID查詢該活動關卡的存取權限。<br /> SQL語法:<br /><pre><code class="sql">SELECT *<br /> FROM FormFieldAccessDefinition<br /> WHERE OID = '4beb4023e40510048797ab8fbcef89eb';</code></pre><br /> <a href="https://www.blogger.com/#"><img border="0" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjcwcDXDcod1v85wHusavZ6pMPgWowGeiutoyVitg6p3I5pNKrIB5LbeOw4d4VoKErvJZPjC_q4t6oynGJZxnbGg1Ue5cAfNlDsUwSCQFIIWNp9XRz_B067JfXQdDAa-MrYG_Vgk7ILg-gv/s400/Image_20190107091844.png" /></a> <br /> <br /><br /> (4)把ACT2錯誤的內容跟正確內容(如ACT1)相比,可發現差異如下。<br /> <a href="https://www.blogger.com/#"><img border="0" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhALT5D0K72mgsX1nSumx0YNGgxf7-18eUbP0q31BabDnlWUDDvTh0HTELl_LFnW4uraEml5kia4XJFIzqye3hbkxlW2BXCXkYhTBhX4HqpX1Hu_TEWGixyxUuXkuUoc3HV4b-qoQkTxrJ-/s400/Image_20190107084423.png" /></a> <br /> <br /> <br /> (5)更正ACT2的formFieldAccessControl內容,補上ENABLED。<br /> SQL語法:<br /> <a href="https://www.blogger.com/#"><img border="0" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgsGqIAdMyPImjPw1apiY8bdoLBPsg_oREdEvxrJioiyB0hzLeWqSW5dKcZR5b5JFwjJq3KwM1OJxCLkoox7swosRJuUppB1aXA251bOob5qAGFcR0eWg26vPXCbwyjxLqRt6AT6ejDbXrx/s400/pro.png" /></a> <br /> <br /> <br /> (6)ACT2即可上傳附件。<br /> <a href="https://www.blogger.com/#"><img border="0" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjyf5T8LJFuO34rpRn3Le0txa6JXoRIK94ljVp8S7H_CSh5XgqLZmowpEGxasv1DziTwfpN2mh_5HYvvolQJ_nA9A7F-ZZ2oeJlDnikJK-OM6hPmcEETABr4fwvSAuOHS7JYcIvmrYYYeoI/s400/Image_20190107084918.png" /></a> <br />
</div>
